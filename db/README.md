# TITAN-OMNI v7 Database Layer

## Purpose
This directory contains the database migration scripts and documentation for the TITAN-OMNI v7 system. 
The focus is on "Investment Cycles" and append-only traceability.

## Migrations
Migrations are plain SQL files located in `db/migrations/`. They should be applied in numeric order.

### 001_v7_cycles.sql
- **investment_cycles**: core table for tracking investment cycles.
- **cycle_events**: audit log for all cycle-related events (append-only by convention).
- **governance_requests**: request/approval flow for sensitive actions.

## Conventions
- **Append-Only**: `cycle_events` should never be updated or deleted. This will be enforced by the API layer in future steps.
- **Timestamps**: All timestamps are `TIMESTAMPTZ` and default to `now()`.
- **UUIDs**: Primary keys for major entities use UUIDs generated by `gen_random_uuid()` (requires `pgcrypto`).

## Application (Manual)
To apply these migrations in Supabase:
1. Open the Supabase SQL Editor.
2. Copy the content of each `.sql` file in order.
3. Run the script.
